(this.webpackJsonpcanvas=this.webpackJsonpcanvas||[]).push([[0],{153:function(e,t){},154:function(e,t){},155:function(e,t){},158:function(e,t,n){"use strict";n.r(t);var c,a=n(2),s=n(0),i=n.n(s),r=n(12),o=n.n(r),u=n(188),l=n(189),h=n(20),j=n.n(h),b=j()((function(){return{progressWrapper:{display:"flex",justifyContent:"center",alignItems:"center"}}})),v=function(e){var t=e.loading,n=e.children,c=b();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(u.a,{}),Object(a.jsx)("div",{children:t?Object(a.jsx)("div",{className:c.progressWrapper,children:Object(a.jsx)(l.a,{})}):n})]})},d=n(77),f=n(5),O=j()((function(e){return{button:{display:"inline-block",cursor:"pointer",color:"#fff",paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5),paddingRight:e.spacing(3),paddingLeft:e.spacing(3),textAlign:"center"},caption:{fontSize:"0.70rem"},selected:{background:"linear-gradient(90deg, rgba(172,118,255,1) 0%, rgba(91,91,255,1) 100%)"}}})),p=function(e){var t=e.icon,n=e.text,c=e.onClick,s=e.selected,i=O();return Object(a.jsxs)("div",{className:Object(f.a)(i.button,Object(d.a)({},i.selected,s)),onClick:c,children:[t,Object(a.jsx)("div",{className:i.caption,children:n})]})},x=n(192),y=n(193),C=n(24),g=n(9),T=n(10),E=n(13),S=n(21);!function(e){e[e.SELECT=0]="SELECT",e[e.BRUSH=1]="BRUSH",e[e.SHAPE=2]="SHAPE",e[e.TEXT=3]="TEXT"}(c||(c={}));var k=n(49),w=n(48),m=function(){function e(t){Object(g.a)(this,e),this.canvasStore=t}return Object(T.a)(e,[{key:"resetCanvas",value:function(){this.canvasStore.canvas.isDrawingMode=!1,this.canvasStore.selectable=!1,this.canvasStore.canvas.defaultCursor="default",this.canvasStore.canvas.discardActiveObject().renderAll()}},{key:"select",value:function(){this.resetCanvas(),this.setTool()}}]),e}(),P=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,null,[{key:"getInstance",value:function(e){switch(e.selectedTool){case c.SELECT:return new _(e);case c.BRUSH:return new L(e);case c.SHAPE:return new I(e);case c.TEXT:return new N(e);default:return new R(e)}}}]),e}(),_=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"setTool",value:function(){this.canvasStore.selectable=!0}}]),n}(m),L=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"setTool",value:function(){this.canvasStore.canvas.isDrawingMode=!0}}]),n}(m),I=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"setTool",value:function(){this.canvasStore.canvas.defaultCursor="crosshair"}}]),n}(m),N=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"setTool",value:function(){this.canvasStore.canvas.defaultCursor="text"}}]),n}(m),R=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"setTool",value:function(){}}]),n}(m),A=n(46),M=function(){function e(t,n){Object(g.a)(this,e),this.value=t,this.display=n,e._values.push(this)}return Object(T.a)(e,[{key:"getShape",value:function(t){switch(this){case e.RECT:return new S.fabric.Rect(t);case e.ELLIPSE:return new S.fabric.Ellipse(t);case e.TRIANGLE:return new S.fabric.Triangle(t);default:return new S.fabric.Rect(t)}}}],[{key:"values",value:function(){return this._values}},{key:"valueOf",value:function(e){return this.values().find((function(t){return t.value===e}))}}]),e}();M._values=[],M.RECT=new M("rect","\uc0ac\uac01\ud615"),M.ELLIPSE=new M("ellipse","\uc6d0"),M.TRIANGLE=new M("triangle","\uc0bc\uac01\ud615");var B=10,D=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,[{key:"handle",value:function(e){if(e.object.isType(M.RECT.value)||e.object.isType(M.TRIANGLE.value))e.object.set({width:Math.max(B,e.object.width||B),height:Math.max(B,e.object.height||B)}).setCoords();else if(e.object.isType(M.ELLIPSE.value)){var t=e.object;t.set({rx:Math.max(5,t.rx||5),ry:Math.max(5,t.ry||5)}).setCoords()}e.canvasStore.selectedTool=c.SELECT,e.canvasStore.canvas.setActiveObject(e.object),e.canvasStore.canvas.renderAll()}}]),e}(),U=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,[{key:"handle",value:function(e){e.object=e.canvasStore.shapeType.getShape({left:e.startCursorPosition.x,top:e.startCursorPosition.y,hasBorder:!0,stroke:"#000",strokeWidth:3,fill:"transparent",selectable:!1,hoverCursor:"default"}),e.object.isType(M.RECT.value)||e.object.isType(M.TRIANGLE.value)?e.object.set({width:0,height:0}):e.object.isType(M.ELLIPSE.value)&&e.object.set({rx:0,ry:0}),e.canvasStore.canvas.add(e.object)}}]),e}(),H=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,[{key:"handle",value:function(e){e.currentCursorPosition.x<e.startCursorPosition.x&&e.object.set("left",Math.abs(e.currentCursorPosition.x)),e.currentCursorPosition.y<e.startCursorPosition.y&&e.object.set("top",Math.abs(e.currentCursorPosition.y)),e.object.set("flipX",e.currentCursorPosition.x<e.startCursorPosition.x),e.object.set("flipY",e.currentCursorPosition.y<e.startCursorPosition.y),e.object.isType(M.RECT.value)||e.object.isType(M.TRIANGLE.value)?e.object.set({width:Math.abs(e.startCursorPosition.x-e.currentCursorPosition.x),height:Math.abs(e.startCursorPosition.y-e.currentCursorPosition.y)}):e.object.isType(M.ELLIPSE.value)&&e.object.set({rx:Math.abs(e.startCursorPosition.x-e.currentCursorPosition.x)/2,ry:Math.abs(e.startCursorPosition.y-e.currentCursorPosition.y)/2}),e.canvasStore.canvas.renderAll()}}]),e}(),X=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,[{key:"handle",value:function(e){e.object=new S.fabric.IText("\ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694",{top:e.currentCursorPosition.y,left:e.currentCursorPosition.x,fontSize:24}),e.canvasStore.canvas.add(e.object),e.canvasStore.selectedTool=c.SELECT,e.canvasStore.canvas.setActiveObject(e.object),e.object.selectAll(),e.object.enterEditing()}}]),e}(),W=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,[{key:"handle",value:function(e){}}]),e}(),z=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,[{key:"handle",value:function(e){}}]),e}(),G=function(){function e(t){Object(g.a)(this,e),this.canvasStore=t,this.shareObject={e:{},canvasStore:this.canvasStore,startCursorPosition:{x:0,y:0},currentCursorPosition:{x:0,y:0},isDown:!1}}return Object(T.a)(e,[{key:"init",value:function(){var t=this.canvasStore.canvas;t.on(e.MOUSE_UP,this.handleMouseUp.bind(this)),t.on(e.MOUSE_MOVE,this.handleMouseMove.bind(this)),t.on(e.MOUSE_DOWN,this.handleMouseDown.bind(this)),t.on(e.SELECTION_CREATED,this.handleSelectObject.bind(this)),t.on(e.SELECTION_UPDATED,this.handleSelectObject.bind(this)),t.on(e.SELECTION_CLEARED,this.handleDeSelectObject.bind(this))}},{key:"handleSelectObject",value:function(){var e=this.canvasStore.canvas;this.canvasStore.activeObject=e.getActiveObject(),this.canvasStore.activeObjects=e.getActiveObjects()}},{key:"handleDeSelectObject",value:function(){this.canvasStore.activeObject=void 0,this.canvasStore.activeObjects=[]}},{key:"handleMouseUp",value:function(e){var t;this.shareObject.e=e,this.shareObject.isDown=!1,null===(t=J.getInstance(this.canvasStore))||void 0===t||t.handle(this.shareObject)}},{key:"handleMouseDown",value:function(e){var t;this.shareObject.e=e,this.shareObject.isDown=!0,this.shareObject.startCursorPosition=Object(A.a)({},this.getCursorPosition(e)),this.shareObject.currentCursorPosition=Object(A.a)({},this.getCursorPosition(e)),null===(t=F.getInstance(this.canvasStore))||void 0===t||t.handle(this.shareObject)}},{key:"handleMouseMove",value:function(e){var t;(this.shareObject.e=e,this.shareObject.currentCursorPosition=Object(A.a)({},this.getCursorPosition(e)),this.shareObject.isDown)&&(null===(t=Y.getInstance(this.canvasStore))||void 0===t||t.handle(this.shareObject))}},{key:"getCursorPosition",value:function(e){return this.canvasStore.canvas.getPointer(e.e)}}]),e}();G.MOUSE_UP="mouse:up",G.MOUSE_DOWN="mouse:down",G.MOUSE_MOVE="mouse:move",G.SELECTION_CLEARED="selection:cleared",G.SELECTION_CREATED="selection:created",G.SELECTION_UPDATED="selection:updated";var J=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,null,[{key:"getInstance",value:function(e){switch(e.selectedTool){case c.SHAPE:return new D;case c.TEXT:return new X;default:return null}}}]),e}(),F=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,null,[{key:"getInstance",value:function(e){switch(e.selectedTool){case c.SHAPE:return new U;case c.TEXT:return new W;default:return null}}}]),e}(),Y=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,null,[{key:"getInstance",value:function(e){switch(e.selectedTool){case c.SHAPE:return new H;case c.TEXT:return new z;default:return null}}}]),e}(),V=function(){function e(t,n){Object(g.a)(this,e),this.value=t,this.display=n,e._values.push(this)}return Object(T.a)(e,[{key:"getBrush",value:function(t){switch(this){case e.PENCIL:return new S.fabric.PencilBrush(t);case e.CIRCLE:return new S.fabric.CircleBrush(t);case e.SPRAY:return new S.fabric.SprayBrush(t);default:return new S.fabric.PencilBrush(t)}}}],[{key:"values",value:function(){return this._values}},{key:"valueOf",value:function(e){return this.values().find((function(t){return t.value===e}))}}]),e}();V._values=[],V.PENCIL=new V("pencil","\uc5f0\ud544"),V.CIRCLE=new V("circle","\uc6d0\ud615"),V.SPRAY=new V("spray","\uc2a4\ud504\ub808\uc774");var q,K=function(){function e(){Object(g.a)(this,e),this.canvasId="canvas",this._canvas={},this._width=500,this._height=500,this._backgroundColor="white",this._selectedTool=c.SELECT,this._selectable=!1,this._brushType=V.PENCIL,this._shapeType=M.RECT,this._activeObject=void 0,this._activeObjects=[],Object(E.k)(this)}return Object(T.a)(e,[{key:"initCanvas",value:function(e,t){this._canvas=new S.fabric.Canvas(e,t),this.selectedTool=this._selectedTool,new G(this).init()}},{key:"canvas",get:function(){return this._canvas}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e}},{key:"selectedTool",get:function(){return this._selectedTool},set:function(e){this._selectedTool=e,P.getInstance(this).select()}},{key:"selectable",get:function(){return this._selectable},set:function(e){this.canvas.selection=e,this.canvas.getObjects().forEach((function(t){t.selectable=e,t.hoverCursor=e?"move":"default"}))}},{key:"brushType",get:function(){return this._brushType},set:function(e){this._brushType=e,this.canvas.freeDrawingBrush=e.getBrush(this.canvas)}},{key:"shapeType",get:function(){return this._shapeType},set:function(e){this._shapeType=e}},{key:"activeObject",get:function(){return this._activeObject},set:function(e){this._activeObject=e}},{key:"activeObjects",get:function(){return this._activeObjects},set:function(e){this._activeObjects=e}}]),e}(),Q=new function e(){Object(g.a)(this,e),this.canvasStore=void 0,this.canvasStore=new K},Z=i.a.createContext(Q),$=function(e){var t=e.children;return Object(a.jsx)(Z.Provider,{value:Q,children:t})},ee=function(){return i.a.useContext(Z)},te=n(107),ne=n.n(te),ce=n(109),ae=n.n(ce),se=n(108),ie=n.n(se),re=n(112),oe=n(7),ue=n(111),le=n(195),he=n(190),je=n(191),be=n(103),ve=n.n(be),de=n(104),fe=n.n(de),Oe=n(105),pe=n.n(Oe),xe=n(106),ye=n.n(xe),Ce=n(87),ge=n.n(Ce),Te=n(102);!function(e){e.TEXT="text/plain"}(q||(q={}));var Ee=function(){function e(){Object(g.a)(this,e)}return Object(T.a)(e,null,[{key:"writeText",value:function(e,t){var n=new Blob([t],{type:q.TEXT}),c=window.URL.createObjectURL(n);this.write(e,c)}},{key:"write",value:function(e,t){var n=document.createElement("a");n.download=e,n.href=t,n.click()}},{key:"read",value:function(){var e=Object(Te.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=new FileReader;c.onload=function(){return e(c.result)},c.onerror=function(){return n()},c.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Se=Object(oe.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return Object(a.jsx)(ue.a,Object(A.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),ke=Object(oe.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(le.a);function we(){var e=i.a.useState(null),t=Object(re.a)(e,2),n=t[0],c=t[1],s=ee().canvasStore,r=i.a.useRef(null),o=function(){c(null)};return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"file",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t.item(0);e.target.value="",n&&Ee.read(n).then((function(e){s.canvas.loadFromJSON(e,(function(){}))})).catch((function(e){return console.error(e)}))},ref:r,style:{display:"none"},accept:"application/json"}),Object(a.jsx)(p,{icon:Object(a.jsx)(ve.a,{}),text:"\uba54\ub274",onClick:function(e){c(e.currentTarget)}}),Object(a.jsxs)(Se,{anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:o,children:[Object(a.jsxs)(ke,{onClick:function(){var e;null===(e=r.current)||void 0===e||e.click(),o()},children:[Object(a.jsx)(he.a,{children:Object(a.jsx)(fe.a,{fontSize:"small"})}),Object(a.jsx)(je.a,{primary:"\uc5f4\uae30"})]}),Object(a.jsxs)(ke,{onClick:function(){Ee.writeText("canvas.json",JSON.stringify(s.canvas.toJSON())),o()},children:[Object(a.jsx)(he.a,{children:Object(a.jsx)(pe.a,{fontSize:"small"})}),Object(a.jsx)(je.a,{primary:"\uc800\uc7a5"})]}),Object(a.jsxs)(ke,{onClick:function(){var e=s.canvas.toDataURL();Ee.write("canvas.png",e),o()},children:[Object(a.jsx)(he.a,{children:Object(a.jsx)(ye.a,{fontSize:"small"})}),Object(a.jsx)(je.a,{primary:"\uc774\ubbf8\uc9c0\ub85c \uc800\uc7a5"})]})]})]})}var me=n(110),Pe=n.n(me),_e=j()((function(){return{appBarColor:{backgroundColor:"rgba(30,30,30,0.95)"},left:{justifyContent:"flex-start"},center:{display:"flex",flex:1,justifyContent:"center"},right:{justifyContent:"flex-end"}}})),Le=Object(C.a)((function(){var e=_e(),t=ee().canvasStore;return Object(a.jsx)(x.a,{classes:{colorDefault:e.appBarColor},color:"default",elevation:0,children:Object(a.jsxs)(y.a,{variant:"dense",children:[Object(a.jsx)("div",{className:e.left,children:Object(a.jsx)(we,{})}),Object(a.jsxs)("div",{className:e.center,children:[Object(a.jsx)(p,{icon:Object(a.jsx)(ne.a,{}),text:"\uc120\ud0dd",onClick:function(){return t.selectedTool=c.SELECT},selected:t.selectedTool===c.SELECT}),Object(a.jsx)(p,{icon:Object(a.jsx)(ie.a,{}),text:"\ube0c\ub7ec\uc2dc",onClick:function(){return t.selectedTool=c.BRUSH},selected:t.selectedTool===c.BRUSH}),Object(a.jsx)(p,{icon:Object(a.jsx)(ae.a,{}),text:"\uc170\uc774\ud504",onClick:function(){return t.selectedTool=c.SHAPE},selected:t.selectedTool===c.SHAPE}),Object(a.jsx)(p,{icon:Object(a.jsx)(Pe.a,{}),text:"\ud14d\uc2a4\ud2b8",onClick:function(){return t.selectedTool=c.TEXT},selected:t.selectedTool===c.TEXT})]}),Object(a.jsx)("div",{className:e.right})]})})})),Ie=n(78),Ne=n(196),Re=n(194),Ae=j()((function(e){return{title:{marginBottom:e.spacing(3)},input:{padding:e.spacing(1),borderRadius:4,backgroundColor:"#fff"}}})),Me=Object(C.a)((function(){var e=Ae(),t=ee().canvasStore;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(Ie.a,{variant:"h6",color:"primary",children:"\ube0c\ub7ec\uc2dc"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(Ne.a,{mb:1,children:Object(a.jsx)(Ie.a,{variant:"caption",children:"\ubaa8\uc591"})}),Object(a.jsx)(Re.a,{className:e.input,native:!0,onChange:function(e){t.brushType=V.valueOf(e.target.value)||V.PENCIL},value:t.brushType.value,label:"\ube0c\ub7ec\uc2dc \ubaa8\uc591",fullWidth:!0,children:V.values().map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.display},e.value)}))})]})]})})),Be=j()((function(e){return{title:{marginBottom:e.spacing(3)},input:{padding:e.spacing(1),borderRadius:4,backgroundColor:"#fff"}}})),De=Object(C.a)((function(){var e=Be(),t=ee().canvasStore;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(Ie.a,{variant:"h6",color:"primary",children:"\uc170\uc774\ud504"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(Ne.a,{mb:1,children:Object(a.jsx)(Ie.a,{variant:"caption",children:"\ubaa8\uc591"})}),Object(a.jsx)(Re.a,{className:e.input,native:!0,onChange:function(e){t.shapeType=M.valueOf(e.target.value)||M.ELLIPSE},value:t.shapeType.value,label:"\uc170\uc774\ud504 \ubaa8\uc591",fullWidth:!0,children:M.values().map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.display},e.value)}))})]})]})})),Ue=j()((function(e){return{root:{padding:e.spacing(3)}}})),He=Object(C.a)((function(){var e=Ue(),t=ee().canvasStore.selectedTool;return Object(a.jsxs)("div",{className:e.root,children:[t===c.BRUSH&&Object(a.jsx)(Me,{}),t===c.SHAPE&&Object(a.jsx)(De,{})]})})),Xe=j()((function(e){return{root:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh"},flexBox:{display:"flex",flex:1},contents:{display:"flex"},left:{flexBasis:"".concat(240,"px"),backgroundColor:"#f0f0f0"},canvasWrapper:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,backgroundColor:"#c0c0c0",padding:e.spacing(3)}}})),We=Object(C.a)((function(){var e=Xe(),t=ee().canvasStore;return i.a.useEffect((function(){var e=document.getElementById(t.canvasId);t.initCanvas(e,{width:t.width,height:t.height,backgroundColor:t.backgroundColor})}),[]),Object(a.jsxs)(v,{children:[Object(a.jsx)(Le,{}),Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(y.a,{variant:"dense"}),Object(a.jsxs)("div",{className:e.flexBox,children:[Object(a.jsx)("div",{className:e.left,children:Object(a.jsx)(He,{})}),Object(a.jsx)("div",{className:e.canvasWrapper,children:Object(a.jsx)("canvas",{id:t.canvasId})})]})]})]})}));var ze=function(){return Object(a.jsx)(We,{})};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)($,{children:Object(a.jsx)(ze,{})})}),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.24d3b1bd.chunk.js.map